<html>
<head lang="en">
    <meta charset="UTF-8" />
    <title>RIC Report</title>
    <link rel="stylesheet" href="template.css" />
</head>
<body>
    <div id="report">
        <div id="titleOnTop">
            <div id="reportTitle"></div>
            <div class="reportOperationsTitle">
                <div class="operations">
                    <input id="selectAllCheckbox" type="checkbox" name="SelectAll">Select All<br />
                </div>
                <div class="operations">
                    <div id="templateSelect"></div>
                    <select id="templateList">
                        <option value="volvo">Volvo</option>
                        <option value="saab">Saab</option>
                        <option value="mercedes">Mercedes</option>
                        <option value="audi">Audi</option>
                    </select>
                    <input type="button" name="AddTemplate" value="Add New" />
                </div>
                <div class="operations">
                    <div id="shareReport"></div>
                    <select id="shareList">
                        <option value="Email">Email</option>
                        <option value="Print">Print</option>
                        <option value="Smart Client">Smart Client</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="personLogo">
            <img id="reportLogo" />
            <div id="personName"></div>
        </div>
        <div id="alerts"></div>
        <div id="cards"></div>
    </div>
    <script>
        var template = { "Default": true, "Name": "Person Report", "Cards": [[{ "Header": "Home Address 2", "CardItems": [{ "Keys": ["Address1", "Address2"], "DefaultValue": "No Data", "Label": "Street" }, { "Keys": ["City"], "DefaultValue": "No Data", "Label": "City" }, { "Keys": ["State"], "DefaultValue": "No Data", "Label": "State" }, { "Keys": ["PostalCode"], "DefaultValue": "No Data", "Label": "Zip Code" }] }, { "Header": "Home Address", "CardItems": [{ "Keys": ["Address1", "Address2"], "DefaultValue": "No Data", "Label": "Street" }, { "Keys": ["City"], "DefaultValue": "No Data", "Label": "City" }, { "Keys": ["State"], "DefaultValue": "No Data", "Label": "State" }, { "Keys": ["PostalCode"], "DefaultValue": "No Data", "Label": "Zip Code" }] }, { "Header": "Vehicle Info3", "CardItems": [{ "Keys": ["CarVinSourceA", "CarVinSourceB"], "DefaultValue": "No Data", "Label": "VIN #" }, { "Keys": ["Color"], "DefaultValue": "No Data", "Label": "Color" }, { "Keys": ["Make"], "DefaultValue": "No Data", "Label": "Make" }, { "Keys": ["Model"], "DefaultValue": "No Data", "Label": "Model" }] }], [{ "Header": "Vehicle Info", "CardItems": [{ "Keys": ["CarVinSourceA", "CarVinSourceB"], "DefaultValue": "No Data", "Label": "VIN #" }, { "Keys": ["Color"], "DefaultValue": "No Data", "Label": "Color" }, { "Keys": ["Make"], "DefaultValue": "No Data", "Label": "Make" }, { "Keys": ["Model"], "DefaultValue": "No Data", "Label": "Model" }] }], [{ "Header": "Vehicle Info2", "CardItems": [{ "Keys": ["CarVinSourceA", "CarVinSourceB"], "DefaultValue": "No Data", "Label": "VIN #" }, { "Keys": ["Color"], "DefaultValue": "No Data", "Label": "Color" }, { "Keys": ["Make"], "DefaultValue": "No Data", "Label": "Make" }, { "Keys": ["Model"], "DefaultValue": "No Data", "Label": "Model" }] }]], "Logo": "iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB1RJREFUeNrsWltsHFcZ/s/M7Ozszl5n9m7vxYm9dtYusds4DqYpNAZCUQhJVTkyDSgUIoL6VPpQeCjI8GCQuIiKVFSI0hZaQVVSCVGRx/KQQKDQBAg0ETSkreXE2Im9m+x653IO/9jE3dlxsJ1k7Y3UY3+e2bMz5/zn/7//cmZMGGNwOzcObvNGGjXwZzbyx6phcdA6dxW113521uxvxDx8IwY91MY/ES7EHjjw8Q64984UXKyy1AbjavvJafZy01vgsQyXNjtib371i5sEv0ec7ytXTRj76Wk6dXqy54dnzX80tQ8QJfDUzg8mBb/kArACBMIrcrD/o20c9UlHmppCo1luG1dQvvm5+3IoONgQCYgwWTYj2SuzJ/8wxc40pQUqsdAvPzWUBaBsSYzcmwEh5n+mKS0wtoE/FN2aHPnYlphD+9fg4glUgZPU2UvKHyfp0aaywEwm/L1921PX1f417N4ah1CrcmjXgCvQNAsY65GfH+xPSKrP5RCYEbej79M728RChX+lKRbwZI5Ll9P+fUM9qkNQI9gOlfY9jv580gtqlzr4hc3C0LovYCLsPbJ3eyvvFTClmGwRDESott4NphxHtNi+s/DQjhwnitLT6+rEY3l+SOqOffn+/rjDYfVUH5ihDBBmAPWnwDVxyva9lRsMgQ9mSzOlY/+hv1sXC5SU4PPD21LALI3XgAoy6NFOpMvcPKjLBVqyz3Hdju4I8Kng6M049A0vYLSLf/yO3kg8HRIdHK+m7wJmjUy1ReixDuyzO7kXw+p9/S2+Tt315JpSyNJYVFF/9dCOVsFFiI0apj8KeqYHzw07CGpdcIMwPW67Ph12w6mpcmE7VF56dYpNrYkFBg3vTz7Up0qWBuu1r2W68VhdEoaaAtPnjFb7BlqEadn98zWxwOgmfpOZCTxxYCBF6h3XSOTAjCbnHfd6YF4/CBNv2e4LunkoUoi16aV/Hp+kf22oBfRA8MjwXUmOWUmqBpTwoLdkr6v9a6AeNxiRBNTfv6snSpgif3u1Dr2qBXwrz++P5+SuvCI54rrRkkYnNZddgAU9k8MMzdnu93AEdm5OJPJX2TcaRqE7e5TfHhxMIfc5GwWo1wt6xwY8N1cGdGhA5+cvzdjGaQtL8OdpbbNX0Z45O05Lt9QCX+uVvz/YqYRU5CtQaoOeS61I8zaHTijAXIJjrL2b41JW55+7pRaweBlXAi/u743xLmJ3XFMJgNGqrlz7NaCyBMKFy7bxVImHc2UzmxYrx/50kZ5bTjZhJQvo1t2v7OmOiB4r5Js1z5EEDrWvLmj1Bhr1C1huyMBNX7H1Dxci3PmpCia3S503bYGHe4St8awyurc95Ayb6RCwiAQEzCUB+jSa6Oo82Nw7SH0rK1fmPxPrx0pufhH4idKCM1+rk9DH5hhTZXblyusX/3+dtKwFRH/wheF8mAPT/gSPoanNlGehVJjvqGLCLaKFZvE4s1AH1TWm1T8BEPA3BEYMM/TbdlF25ULw+7eKj+8aKP7o1yf04g0t4OGC8KX+nG9j2vs/Z6tpRnsQ7YdCo5aZgZqm5XflsvyEX4l7WSHsMhZ+HPAXokCq9nse6IoEZ05UvoOmPLhqClmOmwgrLx8sqJJQ57gMZTdys/jnPH4oocCYZTGO3zBQP8xNgbvots2T8Ajw95L2Po+ivYRhdWpVYTRvyIc/kvGFLMd1JK12jBykuKDlWwQa04EGNMdcn+1UhZgpPrcqC3w+z28Kp3yHD2xE7tc5Ls1iOZDWb07j1wHzm8CfF+0bH46DMuGSLrF86vQF+saKLOBSQ8+O5EIY45D3teAomJ0aTsY1BBDCmipXhfp5P5HykbAs/2CpOsmxgJFO/pO9rfKWDuRfvTlpF2pewsnQ5I0CLeDegbPP67Hk2qC0iHPskWUpdE9BefVgOuC3iisbfVA77P1mQ6hjd2iysIBx+/ytkgBn5qDfH9Wera2TbBZ4sNc3NhSXEypPHNpn/Qw1xK0JAPdEEKQOGYZTPlkyhMNLWsDiV1sw8ItDbUGRGObik+V5YJlP+kjjtV8DCCLeoDY5VCxdiox0gFI9ilYYtyWyoOF5YV/M4yMV3c4pDM1wN17GNexlztKtFZFFwd+0J9DdES9/crb6NMDlnkUL7L5DGOqL+r++R/E46h2yBdN9h7Cm2l9EEqP439Cp9Xfl8WCax57onLfyrzMX6F/mF7CtI/SbR3NK1GvWUSeAm477PZhpyfrAinjWQ43zhk2uPNYGr82xe6IJ8ykBtf/oh4NSp6ppzjTdjtR521zf15AxboHoVXsxuTcsR757rvSIIHncX9lhFWuG830xPY4V5fHmfL26TeQhKLkfExhlqsKYfaNym7Qox3kEwzTgBHHBgKHdVsK/gwr/d1kDgUyZEz/2X05Oii74gOoHpTLX1IJXkCivaya8eKkI3Lh+joxgkVDN8EepBAPUs7pYT2qOtVhmC7N4rMWq5kWyiJP0uDBNHyTv/bPHewu4ufZfAQYAcBsh1BLcz1sAAAAASUVORK5CYII=" };

        populateReport(template);
        var reportGrid = [[]];

        // Populates the report.
        function populateReport(template) {
            document.getElementById("reportTitle").innerText = template.Name;
            document.getElementById("reportLogo").src = "data:image/png;base64," + template.Logo;
            createAlerts();
            var cardCreatedCount = 0;
            var cardsLeft = true;
            var cardAt = 0;
            while (cardsLeft) {
                cardsLeft = false;
                for (var i = 0; i < template.Cards.length; i++) {
                    if (template.Cards[i].length <= cardAt) {
                        createBlankCard();
                        continue;
                    }
                    cardsLeft = true;
                    var cardContainer = createCard(template.Cards[i][cardAt], 0, 0);
                    createExpando(cardContainer);
                    //alert(cardCreatedCount);
                    cardCreatedCount++;
                    if (cardCreatedCount % 3 == 0) {
                        createLineBreak();
                    }
                }
                cardAt++;
            }
            putName(template);
        }

        //Sid's temp code

        function putName(template) {
            document.getElementById("personName").innerText = "Siddharth Mishra";
            document.getElementById("templateSelect").innerText = "Template: ";
            document.getElementById("shareReport").innerText = "Share: ";
        }

        //Sid's temp code ended


        function createLineBreak() {
            //alert('lb');
            var lb = document.createElement("div");
            lb.style.clear = "both";
            document.getElementById("cards").appendChild(lb);

        }

        function createBlankCard() {
        }


        function createAlerts() {
            document.getElementById("alerts").innerText = "alerts go here";
        }

        function createLabel(label) {
            var container = document.createElement("div");
            if (label.Keys.length > 0) {
                var para = document.createElement("P");

                para.innerText = label.Label + ":     ";
                var value = getValueByKey(label.Keys[0]);
                if (value == "") {
                    para.innerText += label.DefaultValue;
                }
                else {
                    para.innerText += value;
                }
                container.appendChild(para);

                for (var i = 1; i < label.Keys.length; i++) {
                    var additionalKey = label.Keys[i];
                    var subPara = document.createElement("P");
                    subPara.innerText = getValueByKey(label.Keys[i]);
                    container.appendChild(subPara);
                }

                return container;
            }
        }


        function getValueByKey(key) {
            return "dummy data";
        }



        function createCard(card, column, row) {
            var cardContainer = document.createElement("div");
            cardContainer.className = "card";

            var heading = document.createElement("P");
            heading.innerText = card.Header
            heading.className = "heading";
            cardContainer.appendChild(heading);

            for (var i = 0; i < card.CardItems.length; i++) {
                var cardItem = createLabel(card.CardItems[i]);
                cardContainer.appendChild(cardItem);
            }
            document.getElementById("cards").appendChild(cardContainer);
            return cardContainer;

        }

        function createExpando(cardContainer) {
            var container = document.createElement("div");
            var expand = document.createElement("span");
            var collapse = document.createElement("span");
            expand.innerText = "more...";
            collapse.innerText = "less...";
            container.onclick = function () { showHideCard(container); };
            container.appendChild(expand);
            container.appendChild(collapse);
            collapse.style.display = "none";
            //alert(cardContainer.clientHeight);

            var overHeight = cardContainer.clientHeight - 300
            if (overHeight > 0) {
                cardContainer.style.height = "300px";
                cardContainer.appendChild(container);
                container.style.position = "relative";
                var top = -20 + (overHeight * -1) + "px";
                container.style.top = top;
                container.style.left = "250px";

            }

        }

        function showHideCard(ele) {
            if (ele.parentNode.clientHeight <= 300) {
                ele.parentNode.style.height = "";
                var buttons = ele.getElementsByTagName("span");

                for (var i = 0; i < buttons.length; i++) {
                    buttons[i].style.display = buttons[i].style.display == "none" ? "inline" : "none"
                }
            }
            else {
                ele.parentNode.style.height = "300px";
                var buttons = ele.getElementsByTagName("span");

                for (var i = 0; i < buttons.length; i++) {
                    buttons[i].style.display = buttons[i].style.display == "none" ? "inline" : "none"
                }
            }

        }

    </script>


</body>
</html>

